{"name":"Apple3rtr","tagline":"Apple /// Ready-to-Run","body":"# Table of Contents\r\n\r\n- [Introduction](#introduction)\r\n  - [What's in the Box](#whats-in-the-box)\r\n  - [Preinstalled Software on HDD](#preinstalled-software-on-hdd)\r\n- [Installation](#installation)\r\n- [SDL and MESS Installation](#sdl-and-mess-installation)\r\n  - [OS/X](#osx)\r\n  - [Windows](#windows)\r\n  - [Linux](#linux)\r\n  - [Roll Your Own (assumes OS/X or Linux)](#roll-your-own-assumes-osx-or-linux)\r\n- [Cold Booting](#cold-booting)\r\n- [How to Operate Your Virtual Apple ///](#how-to-operate-your-virtual-apple-)\r\n- [Known Issues](#known-issues)\r\n- [Support](#support)\r\n- [More Info About MESS Apple ///](#more-info-about-mess-apple-)\r\n- [Advanced HOW-TOs](#advanced-how-tos)\r\n  - [Using Meat-net to get data/programs in and out of the Apple ///](#using-meat-net-to-get-dataprograms-in-and-out-of-the-apple-)\r\n  - [Fortran /// Q&D](#fortran--qd)\r\n  - [Get \"online\" with Access ///](#get-online-with-access-)\r\n  - [VSDRIVE](#vsdrive)\r\n  - [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd)\r\n  \t - [Upgrade apple3.hd while preserving your HOME volume](#upgrade-apple3hd-while-preserving-your-home-volume)\r\n  - [Directly Manipulating CPM1](#directly-manipulating-cpm1)\r\n  - [Printing](#printing)\r\n  - [Disable All Audio](#disable-all-audio)\r\n  - [Joystick](#joystick)\r\n  - [Numeric Pad](#numeric-pad)\r\n  - [Boot from VSDRIVE](#boot-from-vsdrive)\r\n- [Using the boot Script (OS/X and Linux only)](#using-the-boot-script-osx-and-linux-only)\r\n- [Changelog](Changelog.md)\r\n\r\n\r\n# Introduction\r\n\r\nApple /// Ready-to-Run is a bundle of support files, docs, and scripts for MESS Apple /// emulation (<http://www.mess.org/>).  Included is an HDD image with many popular Apple /// titles (source: <http://apple3.org>) preinstalled so that you can get started with your own virtual Apple /// as quickly as possible.\r\n\r\n## Version\r\n\r\nVersion 2.0, released Nov 23 2014\r\n\r\n\r\n## What's in the Box\r\n\r\n* Apple /// Computer\r\n  * 2 MHz 6502\r\n  * 512K RAM Expansion\r\n  * Internal Floppy Drive\r\n  * (2) Joystick Ports (Demo: <https://www.youtube.com/watch?v=W9pj7LUF6g8>)\r\n  * RS-232-C Port\r\n     * Communications Emulation (Demo: <https://www.youtube.com/watch?v=GuVev9AYGIc>)\r\n     * Printer Emulation (Demo: <https://www.youtube.com/watch?v=ndU764dS23I>)\r\n* (3) External Floppy Drives\r\n* CFFA2 Mass Storage Adapter in Slot 1\r\n  * 128 MB Internal Hard Disk Drive (HDD) Partitioned into:\r\n     * (2) 16MB Partitions:\r\n         * `/BOS` (`.PROFILE`)\r\n         * `/HOME` (`.CFIDE2`)\r\n     * Space for 6 additional 16MB partitions available\r\n* Thunderclock Card in Slot 2 for second resolution time\r\n* Appli-Card 6 MHz z80 CP/M Adapter in Slot 3 for running those *other* business applications (and games!)\r\n* AppleColor Monitor 100 \r\n\r\n\r\n## Preinstalled Software on HDD\r\n\r\n- BOS 1.0, the *most* advanced Apple /// Operating System\r\n  - BOS Program Switcher\r\n  - BOS Utilities\r\n- SOS 1.3 System Utilities\r\n- Backup ///\r\n- Lazarus ///\r\n- Access /// 3.2X (Demo: <https://www.youtube.com/watch?v=GuVev9AYGIc>)\r\n- Access 3270 1.0\r\n- Apple Writer ///\r\n- VisiCalc Advanced (Demo: <https://www.youtube.com/watch?v=eUx6TfEPDYA>)\r\n- /// E-Z Pieces\r\n- Quick File ///\r\n- Draw ON ///\r\n- Apple /// Business Basic 1.23\r\n- Apple /// Pascal 1.1\r\n- Apple /// Fortran\r\n- Apple /// COBOL\r\n- CP/M 2.2 (2 MB Virtual HDD (`E:`) as file `/BOS/CPM1`)\r\n  - WordStar 3.0\r\n  - DBaseII 2.3B\r\n  - Turbo Pascal 3.01A\r\n  - Zork I: The Great Underground Empire\r\n  - Zork II: The Wizard of Frobozz\r\n  - Zork III: The Dungeon Master\r\n  - SARGON 2.1\r\n\r\n\r\n# Installation\r\n\r\n```\r\ngit clone https://github.com/datajerk/apple3rtr.git\r\n```\r\n\r\n*or*\r\n\r\nDownload <https://github.com/datajerk/apple3rtr/archive/master.zip> and extract (you'll want to rename `apple3rtr-master` to `apple3rtr`).\r\n\r\nThis document assumes that all work will be in the `apple3rtr` directory.\r\n\r\n\r\n# SDL and MESS Installation\r\n\r\n\r\n## OS/X\r\n\r\n+ SDL 2.x is required (<http://www.libsdl.org/download-2.0.php>)\r\n\r\n\t> Open `SDL2-2.x.x.dmg` and drag `SDL2.framework` to `/Library/Frameworks`\r\n\r\n+ SDLMESS 64-bit 0.155 or later:  <http://sdlmame.lngn.net>\r\n\r\n\t> Extract and place in your path or in the `apple3rtr` directory.\r\n\r\n  E.g.:\r\n\t```\r\n\tcd apple3rtr\r\n\tcurl http://sdlmame.lngn.net/mess0155-64bit.zip >mess0155-64bit.zip\r\n\tunzip mess0155-64bit.zip\r\n\tcd mess0155-64bit\r\n\tcp -a * ..\r\n\tcd ..\r\n\trm -rf mess0155-64bit*\r\n\t```\t\r\n\r\n\r\n## Windows\r\n\r\n+ SDL 2.x is required (<http://www.libsdl.org/download-2.0.php>)\r\n\r\n+ MESS 0.155 or later:  <http://www.mamedev.org/release.html>--place in your path or in the `apple3rtr` directory.\r\n\r\n+ From the `apple3rtr` directory type:\r\n\t```\r\n\tcopy mess.ini.windows mess.ini\r\n\t```\r\n\r\n\r\n## Linux\r\n\r\n+ Varies depending on distribution.  SDL 2.x and MESS 0.155 or later required.\r\n\r\n\r\n## Roll Your Own (assumes OS/X or Linux)\r\n\r\n+ Install SDL 2.x.x development libraries (<http://www.libsdl.org/download-2.0.php>)\r\n\r\n+ Build from source:\r\n\t```\r\n\tgit clone https://github.com/mamedev/mame.git\r\n\tcd mame\r\n\tmake TARGET=mess PTR64=1 -j4\r\n\t```\r\n\t> Change `-j4` to `-j`*# of cores* to get faster builds.\r\n\r\n\r\n# Cold Booting\r\n\r\n> If `mess64` is not in your path, then provide the full path name to `mess64`.\r\n\r\n> OS/X and Linux users, if `mess64` is in `apple3rtr` then type `./mess64`.\r\n\r\n1. Type on a single line (***but do not press RETURN--yet***):\r\n\r\n\t```\r\nmess64 apple3 -skip_gameinfo -volume -24 -resolution 1024x768 -effect Scanlines0x4 -sl1 cffa2 -hard apple3.hd -sl2 thclock -sl3 applicard -ramsize 512k\r\n```\r\n> Adjust `-volume` and `-resolution` to your taste.  Volume 0 is the loudest.\r\n<br><br>`-effect Scanlines0x4` is optional and only optimized for 1024x768.\r\n<br><br>Smaller scanline options:  `-resolution 768x576 -effect Scanlines75x3`\r\n<br><br>Even smaller scanline options:  `-resolution 512x384 -effect Scanlines75x2`\r\n\r\n2. Append to the command line above *one* of the following floppy images and\r\n   *then* press `RETURN`:\r\n   > The `bosboot` and `cmpboot` images below have been modified to support the CFFA2 adapter.\r\n\r\n+ Apple /// Demo Disk:\r\n\r\n  `-flop1 demodisk.dsk`\r\n\r\n+ BOS 1.0 (4) Disk III system with Apple /// preinstalled applications on\r\n  HDD (`/BOS`):\r\n\r\n  `-flop1 bosboot.dsk`\r\n\r\n+ CP/M 2.2 (4) Disk III system with CP/M preinstalled applications on\r\n  HDD (`/BOS/CPM1` (`E:`)):\r\n  >`A:` = `.D1`, `B:` = `.D2`, `C:` = `.D3`, `D:` = `.D4`, `E:` = `.PROFILE/CPM1`\r\n\r\n  `-flop1 cpmboot.po` \r\n\r\n+ CFFA Utility to create or delete partitions (***DO NOT DELETE `/BOS`!***):\r\n\r\n  `-flop1 cffautil_1.40a.dsk` \r\n\r\n\r\n# How to Operate Your Virtual Apple ///\r\n\r\nAll the keys on your keyboard *should* correspond to the correct Apple /// keys (`Left-Option/Alt` = `Open-Apple` and `Right-Option/Alt` = `Close-Apple`).  The `DELETE`/`BACKSPACE` key has been remapped to the Apple /// `LEFT ARROW` key since there is no `DELETE` or `BACKSPACE` Apple /// key (each Apple /// application will determine how the `LEFT ARROW` behaves).  The `F3` key has been mapped to `RESET`.\r\n\r\nTo remove or insert virtual floppies you will have to engage *PARTIAL Emulation* mode and then launch the *UI Menu*.\r\n\r\nThe default for MESS is to use the `INSERT` key to toggle *PARTIAL/FULL Emulation* mode and to use the `TAB` key to launch and dismiss the *UI Menu*.  There are a few issues with the MESS defaults.  First, not all keyboards have an `INSERT` key, and 2nd, while in *PARTIAL Emulation* mode keys sent for special functions such as launching the *UI Menu* are also sent to the Apple ///.  This can contribute to a poor experience.\r\n\r\nTo address the aforementioned the *PARTIAL/FULL Emulation* mode, toggle has been mapped to the `F1` key, and the *UI Menu* to the `F2` key.\r\n\r\n> OS/X users: If you have `F1`/`F2` set to control brightness (default OS/X behavior) then use `fn-F1` and `fn-F2` for `F1` and `F2` anytime you are instructed to use `F1` or `F2`.\r\n\r\nTo remove or insert a virtual floppy press `F1` to engage *PARTIAL Emulation* mode, then immediately press `F2` to access the *UI Menu*.\r\n\r\nIn the *UI Menu*, `DOWN ARROW` to the *File Manager*, press `RETURN`, select the drive, and then select the new floppy image.  After you have made any and all changes in the *UI Menu* use `F2` to quickly return to the Apple ///, then `F1` to return to *FULL Emulation* mode.\r\n \r\n> Avoid using `ESC` or *Return to System*.  The last `RETURN` will get sent to the system when the *UI Menu* exits, and if not careful in *PARTIAL Emulation* mode an `ESC` will power off the Apple ///.  \r\n\r\nIn summary:\r\n\r\n1.  `F1`, `F2` (or `fn-F1`,`F2`)\r\n2.  `ARROW` to *File Manager*\r\n3.  Select your images\r\n4.  `F2`, `F1` (or `fn-F2`,`F1`)\r\n\r\nTo power down your Apple ///:  Quit any applications, and then select *Quit* from the BOS Program Switcher.  If using CP/M, just quit your application first.  For any other single disk application, just quit.  Now you are ready to power down.  To power down press `F1` (`fn-F1`) to enter *PARTIAL Emulation* mode, then press `ESC` to shutdown.\r\n\r\n> While in *PARTIAL Emulation* mode many of the other keys on the keyboard will be setup to perform other functions, e.g. *P* will PAUSE the Apple ///.  Refer to the MESS documentation (<http://www.mess.org/mess/howto#using_mess>) *and be careful!*\r\n\r\n\r\n# Known Issues\r\n\r\n+ Apple ][ emulation via BOS does not work.  Use a proper Apple ][ emulation diskette image.\r\n\r\n\r\n# Support\r\n\r\n* RTFMs: <http://apple3.org> and <http://www.mess.org/mess/howto>.\r\n\r\n* Join and post a message to the Apple /// Facebook group (<https://www.facebook.com/groups/appleiii/>).\r\n\r\n* Post a message to comp.sys.apple2.\r\n\r\n* Post an issue on Github (<https://github.com/datajerk/apple3rtr/issues>).\r\n\r\n\r\n# More Info About MESS Apple ///\r\n\r\n<http://rbelmont.mameworld.info/>\r\n\r\n\r\n# Advanced HOW-TOs\r\n\r\n## Using Meat-net to get data/programs in and out of the Apple ///\r\n\r\nGetting things in and out of the Apple /// can be done with comm programs (see [Get \"online\" with Access ///](#get-online-with-access-)), VSDRIVE (see [VSDRIVE](#vsdrive)), or by direct manipulation of apple3.hd (see [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd)).  However, using floppy images is probably the easiest and most strait forward.\r\n\r\nFor SOS, AppleCommander works very well: <http://applecommander.sourceforge.net>.  CiderPress for Windows/WINE also works: <http://ciderpress.sourceforge.net>.\r\n\r\nFor CP/M, use CPMTools (<http://www.moria.de/~michael/cpmtools/>) with a format type of `apple-do` for DOS and `apple-po` for ProDOS ordered disk images.  OS/X users will need to install the CLI development tools to build.  Windows users can download Bill Buckels binaries from <http://www.cpm8680.com/cpmtools>.\r\n\r\nDOS order images should be suffixed with `.do` or `.dsk`, and ProDOS/SOS ordered disk images should be suffixed with `.po`.  The incorrect suffix will confuse MESS.\r\n\r\nSee [How to Operate Your Virtual Apple ///](#how-to-operate-your-virtual-apple-) (above) for instructions on working with floppy images.\r\n\r\n\r\n## Fortran /// Q&D\r\n\r\n1.  Launch *Pascal ///*, edit and save your program, e.g. `/HOME/HELLO.F`\r\n2.  From *Pascal ///*, `X)ecute /BOS/FORTRAN/FORTRAN` *or* launch Fortran /// from\r\n    the *BOS Menu*.\r\n3.  Follow the prompts, e.g. `/HOME/HELLO.F`, `/HOME/HELLO`\r\n4.  From *System Utilities* copy `/BOS/FORTRAN/SYSTEM.LIBRARY` to `/HOME/HELLO.LIB`\r\n5.  From *Pascal ///*, `X)ecute /HOME/HELLO`\r\n\r\nGoogle *Apple III Fortran Reference Manual* for more details.\r\n\r\n\r\n## Get \"online\" with Access ///\r\n\r\nThe MESS 0.155 Apple /// driver now includes RS-232 support.  To enable for communications use append:  `-rs232 null_modem -bitb <target>`, where `<target>` is a socket descriptor (`socket.host:port`) for TCP-based bidirectional null-modem communications, e.g. `socket.127.0.0.1:2023`.\r\n\r\n> If MESS crashes while starting with `-rs232 null_modem -bitb socket...`, then wait 30 seconds and try again.\r\n\r\nAs with physical null-modem serial-to-serial communications it is necessary to match the baud (300, 600, 1200, 2400, 4800, 9600, 115200) and protocol (e.g. 8-N-1) on both ends.  For the MESS end of the null-modem connection this can be accomplished via the *System Configuration* menu in the *UI Menu*.  The default is 9600, 8-N-1.  For the Apple /// end, the settings may be available in the application (e.g. Access ///) or may require a change to the `.RS232` driver configuration block via the *System Configuration Program* (SCP).  See the *Apple /// Standard Device Drivers Manual* for more details.\r\n\r\nE.g., `/bin/bash` access from Access ///:\r\n\r\n1.  Install socat\r\n\t> E.g. MacPorts (<https://www.macports.org/>) users can type:\r\n\t```\r\n\tsudo port install socat\r\n\t```\r\n\r\n2.  Type:\r\n    ```\r\n    socat tcp-l:2023,reuseaddr,fork exec:/bin/bash,pty,setsid,setpgid,stderr,ctty &\r\n    ```\r\n    > ***IMPORTANT:  POTENTIAL SECURITY RISK!!!  USE A FIREWALL OR READ SOCAT DOCS ON HOW TO LIMIT ACCESS!!!***\r\n\r\n3.  Append to MESS command line: \r\n    ```\r\n    -rs232 null_modem -bitb socket.127.0.0.1:2023\r\n    ```\r\n4.  After shutting down MESS kill socat:\r\n    ```\r\n    kill %1\r\n    ```\r\n\r\nVideo demo: <https://www.youtube.com/watch?v=GuVev9AYGIc>    \r\n\r\n\r\n## VSDRIVE\r\n\r\nVSDRIVE (Virtual Serial Drive) is an RS-232-based virtual drive hosted by a Mac or PC running ADTPro in *localhost* mode.  Before continuing please read <http://adtpro.sourceforge.net/vdrive.html> to familiarize yourself with VSDRIVE.\r\n\r\nVSDRIVE is a built-in feature of ADTPro.  Only ADTPro-2.0.0 (<http://sourceforge.net/projects/adtpro/files/adtpro/ADTPro-2.0.0>) has been tested and is included with this distribution.\r\n\r\nIn the `disks` subdirectory of the included ADTPro-2.0.0 there are two zip files, `v800k.zip` and `v16m.zip`, containing two files, `Virtual.po` and `Virtual2.po`.  The sizes are 800K and 16M respectively.  You can replace them with any size ProDOS formatted volume as long as the volume is < 16MB (max recognized by SOS) and the names unchanged.  You can create new virtual disks with AppleCommander (<http://applecommander.sourceforge.net/>) or CiderPress (<http://ciderpress.sourceforge.net/>).\r\n\r\n> < 16MB is 32767 sectors (max).  The provided 16MB images are 32767 sectors.\r\n\r\nTo start VSDRIVE:\r\n\r\n1.  Type: `cd ADTPro-2.0.0/disks`\r\n2.  Unzip `v800k.zip` for two 800K virtual disks or unzip `v16m.zip` for two 16M virtual disks.\r\n    > OS/X and Linux users can type `unzip` *filename.zip*.\r\n    \r\n3.  Type: `cd ..`\r\n4.  Type: `./adtpro.sh localhost &` (OS/X, Linux) or `adtpro localhost` (PC).\r\n5.  Type: `cd ..`\r\n\r\nTo use VSDRIVE standalone, append to the MESS command line:\r\n\r\n`-flop1 VDRIVE-2.0.0.DSK -rs232 null_modem -bitb socket.127.0.0.1:1977`\r\n\r\nTo use VSDRIVE with BOS, CFFA2, etc..., append to the MESS command line:\r\n\r\n`-flop1 bosbootvsd.dsk -rs232 null_modem -bitb socket.127.0.0.1:1977`\r\n\r\n> ***IMPORTANT:  IN ALL CASES, CHANGE THE BAUD RATE FROM THE UI MENU TO 115200 BEFORE ACCESSING .VSDRIVE or .VSDRIVE2!***  See [Get \"online\" with Access ///](#get-online-with-access-) about changing baud rates.\r\n\r\n> If MESS crashes while starting with `-rs232 null_modem -bitb socket...`, then wait 30 seconds and try again.\r\n\r\nThe 16M `Virtual.po` and `Virtual2.po` will be mounted as `/V` and `/V2` respectively. The 800K `Virtual.po` and `Virtual2.po` will be mounted as `/VDRIVE.2.0.0` and `/VDRIVE2.2.0.0` respectively. Alternatively, `.VSDRIVE` and `.VSDRIVE2` can be used.\r\n\r\n> The bosboot VSDRIVE disks have `.RS232` and `.PRINTER` removed.  Serial printing and other non-VSDRIVE serial functions will be unavailable.\r\n\r\nTo use VSDRIVE with any other boot disks, use the *System Configuration Program* (SCP) to add the driver `VSDRIVE.A3DRVR` from `VDRIVE-2.0.0.DSK`.  See the *Apple /// Standard Device Drivers Manual* for more details.\r\n\r\nVSDRIVE performs slower than the CFFA2.  The intended purpose is for large scale transfers *the Apple /// way*.  Advanced users will want to use the direct methods below.\r\n\r\nVideo demo: <https://www.youtube.com/watch?v=x-EU9nii2hM>\r\n\r\n\r\n## Directly Manipulating apple3.hd\r\n\r\nHOW-TOs [Using Meat-net to get data/programs in and out of the Apple ///](#using-meat-net-to-get-dataprograms-in-and-out-of-the-apple-), [Get \"online\" with Access ///](#get-online-with-access-), and [VSDRIVE](#vsdrive) provide Apple /// \"native\" ways of transferring files (diskette, serial, and VSDRIVE).  However, the fastest way, is to directly manipulate the HDD image from the host OS.\r\n\r\nPrerequisites:\r\n\r\n1.  The `chdman` utility located in the MESS `tools` directory.  Hopefully your MESS binary distribution includes this utility.\r\n\r\n2.  The `dd` command.  Windows users will need to install/use cygwin (<http://www.cygwin.com/>) and run the following commands from a bash shell.\r\n\r\nTo extract the `BOS` and `HOME` volumes, type:\r\n```\r\ntools/chdman extracthd -f -i apple3.hd -o apple3.hd.image\r\ndd if=apple3.hd.image of=bos.po bs=512 skip=1 count=32767\r\ndd if=apple3.hd.image of=home.po bs=512 skip=32768 count=32767\r\n```\r\n\r\nThe `chdman extracthd` command will extract the raw bits from the CHD formatted `apple3.hd` image into the file `apple3.hd.image`.\r\n\r\nThe two `dd` commands will create the files `bos.po` and `home.po`.  Both are 16MB ProDOS (SOS) formatted images that can be directly manipulated with AppleCommander (<http://applecommander.sourceforge.net/>) or CiderPress (<http://ciderpress.sourceforge.net/>).\r\n\r\nTo create a new HD image from existing `bos.po` and `home.po` images:\r\n\r\n1.  Backup your files with:\r\n\r\n\t```\r\n\tcp -f apple3.hd apple3.hd.backup\r\n\tcp -f apple3.hd.image apple3.hd.image.backup\r\n\t```\r\n\t\r\n2.  Concatenate the partition table, `bos.po`, `home.po`, and the rest of the original image into a new image (The `(` and `)` are part of the command):\r\n\t```\r\n    (dd if=apple3.hd.image.backup bs=512 count=1; cat bos.po home.po; dd if=apple3.hd.image.backup bs=512 skip=65535) >apple3.hd.image\r\n    ```\r\n\r\n3.  Create a new [replacement] CHD formatted HDD image:\r\n\t```\r\n    tools/chdman createhd -f -c none -i apple3.hd.image -o apple3.hd\r\n\t```\r\n\t\r\n4.  Test your new image.\r\n\r\n5.  Cleanup (or not, it's a good to have a backup), type:\r\n\t```\r\n    rm apple3.hd.backup apple3.hd.image.backup apple3.hd.image bos.po home.po\r\n\t```\r\n\r\n### Upgrade apple3.hd while preserving your HOME volume\r\n\r\nDirectly manipulating apple3.hd is a handy way to preserve your data with updated `apple3.hd` images included with this distribution, e.g.:\r\n\r\n1.  Dump current `HOME` volume:\r\n\t```\r\n\ttools/chdman extracthd -f -i apple3.hd -o apple3.hd.image\r\n\tdd if=apple3.hd.image of=home.po bs=512 skip=32768 count=32767\r\n\t```\r\n\t\r\n2.\tInstall new `apple3.hd` from distribution (or just extract new apple3rtr release)\r\n\r\n3.\tDump new `BOS` volume:\r\n\t```\r\n\ttools/chdman extracthd -f -i apple3.hd -o apple3.hd.image\r\n\tdd if=apple3.hd.image of=bos.po bs=512 skip=1 count=32767\r\n\t```\r\n\t\r\n4.  Combine into a new `apple3.hd`:\r\n\t```\r\n\tcp -f apple3.hd apple3.hd.backup\r\n\tcp -f apple3.hd.image apple3.hd.image.backup\r\n\t(dd if=apple3.hd.image.backup bs=512 count=1; cat bos.po home.po; dd if=apple3.hd.image.backup bs=512 skip=65535) >apple3.hd.image\r\n\ttools/chdman createhd -f -c none -i apple3.hd.image -o apple3.hd\r\n\t```\r\n\r\n5.  Clean up (or not):\r\n\t```\r\n\trm apple3.hd.backup apple3.hd.image.backup apple3.hd.image bos.po home.po\r\n\t```\r\n\r\n\r\n## Directly Manipulating CPM1\r\n\r\nThe safest way to work with the CP/M HD image is from CP/M using floppy images to add or backup content.  However, the advanced user, may find that a bit pedestrian.\r\n\r\nPrerequisites:\r\n\r\n1.  ***CLEARLY UNDERSTAND*** [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd) (above).\r\n\r\n2.  Download and install CPMTools (<http://www.moria.de/~michael/cpmtools/>). OS/X users will need to install the CLI development tools to build. Windows users can download Bill Buckels binaries: <http://www.cpm8680.com/cpmtools>.\r\n\r\n3.  Edit CPMTools `diskdefs` and append:\r\n\t```\r\n    diskdef a3cpmhd\r\n      seclen 128\r\n      tracks 512\r\n      sectrk 32\r\n      blocksize 4096\r\n      maxdir 512\r\n      skew 0\r\n      boottrk 2\r\n      os 2.2\r\n    end\r\n\t```\r\n    > If you create a different size CPM1 or CPM2, then you will need to use `STAT x:DSK:` where `x` is the HD image letter to get the geometry info required to build a CPMTools disk definition.  E.g.:\r\n\t```\r\n        E: Drive Characteristics\r\n    16320: 128 Byte Record Capacity\r\n     2040: Kilobyte Drive  Capacity\r\n      512: 32  Byte Directory Entries\r\n        0: Checked  Directory Entries\r\n      256: Records/ Extent\r\n       32: Records/ Block\r\n       32: Sectors/ Track\r\n        2: Reserved Tracks\r\n\t```\r\n\t\r\n4.  Extract `CPM1` from `bos.po`:\r\n\r\n    A.  Follow [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd) and extract `bos.po`.\r\n\r\n    B.  Using AppleCommander or CiderPress extract `CPM1`, e.g. OS/X:\r\n    \r\n        alias applecmd='java -jar /Applications/AppleCommander.app/Contents/Resources/Java/AppleCommander.jar'\r\n        applecmd -g bos.po cpm1 >CPM1\r\n\t\t\r\nDirectly Manipulate `CPM1`:\r\n\r\nAt this point you should have a 2097152 byte file called `CPM1`.  Use the CPMTools commands `cpmls`, `cpmcp`, `cpmrm`, etc... with the `-f a3cpmhd` option to directly manipulate `CPM1`, e.g.:\r\n\r\nListing files from `CPM1`, type:\r\n\r\n\tcpmls -f a3cpmhd CPM1\r\n\t\r\nExtract files from `CPM1`, type:\r\n\r\n\tcpmcp -f a3cpmhd cpm1 0:zork1.com zork1.com\r\n\t\r\nRemove or Write/Update files to `CPM1`, type:\r\n\r\n    cpmrm -f a3cpmhd CPM1 0:sargon.com\r\n    cpmcp -f a3cpmhd CPM1 ~/Downloads/SARGON.COM 0:sargon.com\r\n\r\n> You must remove the file first (if it exists).\r\n\r\nUpdating `bos.po` with `CPM1`:\r\n\r\n1.  Use AppleCommander or CiderPress to remove the old CPM1 and replace it with the new `CPM1`, e.g. OS/X:\r\n\t```\r\n\tapplecmd -d bos.po CPM1\r\n\tapplecmd -p bos.po CPM1 PDA <CPM1\r\n\t```\r\n\r\n2.  Follow [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd) to update/create `apple3.hd` with the updated `bos.po`.\r\n\r\n\t> An alternative to using [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd) would be [VSDRIVE](#vsdrive) by copying `/BOS/CPM1` to `.VSDRIVE`, and then using AppleCommander or CiderPress to extract/replace `CPM1` from `Virtual.po`.\r\n\r\n\r\n## Printing\r\n\r\nThe MESS 0.155 Apple /// driver now includes RS-232 support.  To enable for printer use append: `-rs232 null_modem -bitb <target>`, where `<target>` is a *filename* for the printer output, e.g. `printer.txt`.\r\n\r\nAs with physical null-modem serial-to-serial communications it is necessary to match the baud (300, 600, 1200, 2400, 4800, 9600, 115200) and protocol (e.g. 8-N-1) on both ends.  For the MESS end of the null-modem connection this can be accomplished via the *System Configuration* menu in the *UI Menu*.  The default is 9600, 8-N-1.  For the Apple /// end, the settings are available in the `.PRINTER` driver configuration block via the *System Configuration Program* (SCP).  See the *Apple /// Standard Device Drivers Manual* for more details.\r\n\r\n> `bosboot.dsk` and `cpmboot.po` have `.PRINTER` set to 9600 8-N-1 to match the MESS default.\r\n\r\nTo capture printer output append to MESS command line: \r\n\r\n\t-rs232 null_modem -bitb printer.txt\r\n\r\n\r\nSOS Printing, use: `.PRINTER`\r\n\r\nCP/M Printing, use: `LST:`\r\n\r\nIf given an option to append line feeds (LF) to carriage returns (CR), take it.\r\n\r\nVideo demo: <https://www.youtube.com/watch?v=ndU764dS23I>\r\n\r\n\r\n## Disable All Audio\r\n\r\nJust append to command line:\r\n\r\n\t-audiodriver none\r\n\r\n\r\n## Joystick\r\n\r\nThe MESS 0.155 Apple /// driver now inlcudes analog joystick support.\r\n\r\n> Your average USB retro gamepad/stick will not work since Apple /// joysticks are analog.  Get an analog stick.\r\n\r\nTested analog sticks:  \r\n\r\n- Classic Apple II joysticks with the following adapter:\r\n  <https://www.tindie.com/products/option8/retroconnector-joystick-shield/> (OS/X tested)\r\n- Sony PlayStation DUALSHOCK 3 Wireless Controller (OS/X tested)\r\n- Xbox 360\r\n\r\nNothing is required except to connect your joystick *before launching MESS*.  Use the *Analog Controls* menu from the *UI Menu* to adjust the center and sensitivity as necessary.\r\n\r\nVideo demo: <https://www.youtube.com/watch?v=W9pj7LUF6g8>\r\n\r\n\r\n## Numeric Pad\r\n\r\nNo mystery here, but there are some applications that require a numeric keypad. E.g. Draw ON ///.\r\n\r\nThe following has been tested with OS/X MESS:\r\n\r\n- Belkin YourType Bluetooth Wireless Keypad:\r\n  (<http://www.belkin.com/us/p/P-F8T067/>)\r\n- Logitech Wireless (not Bluetooth!) Solar Keyboard K750 for Mac:\r\n  (<http://www.logitech.com/en-us/product/wireless-solar-keyboard-k750-mac>)\r\n\r\n\r\n## Boot from VSDRIVE\r\n\r\nThe latest versions of MESS and ADTPro have measurably increased the speed of VSDRIVE making it an option as your primary HD.  \"Why?\", you ask.  Answer: simple direct access to `/BOS` and `/HOME` as `Virtual.po` and `Virtual2.po`.\r\n\r\nTo make the switch from CFFA to VSDRIVE:\r\n\r\n1.  Follow [Directly Manipulating apple3.hd](#directly-manipulating-apple3hd) to extract `bos.po` and `home.po`.\r\n\r\n2.  Move `bos.po` and `home.po` to `ADTPro-2.0.0/disks` as `Virtual.po` and `Virtual2.po`,\r\n    e.g. type:\r\n    ```\r\n    mv bos.po ADTPro-2.0.0/disks/Virtual.po\r\n    mv home.po ADTPro-2.0.0/disks/Virtual2.po\r\n    ```\r\n3.  Start ADTPro Server, type:\r\n    ```\r\n    cd ADTPro-2.0.0\r\n    Mac/Linux: ./adtpro.sh localhost &\r\n    Windows: adtpro localhost\r\n\tcd ..\r\n    ```\r\n4.  Use the following boot image and RS232 settings:\r\n\t```\r\n\t-flop1 bosbootvsdroot.dsk -rs232 null_modem -bitb socket.127.0.0.1:1977\r\n\t```\t\r\n\t> ***IMPORTANT:  THE BPS RATE MUST BE SET TO 115K.  You've got about 5 seconds to set it on boot, however after setting the first time MESS will remember.***\r\n\r\n> ADTPro must be restarted anytime there is an out-of-band, i.e. direct manipulation of `Virtual.po` or `Virtual2.po`.  IOW, shutdown MESS, then ADTPro before changing `Virtual.po` or `Virtual2.po`.\r\n\r\n> Not 100% stable.  YMMV.\r\n\r\n\r\n# Using the boot Script (OS/X and Linux only)\r\n\r\nIf typing long command lines is too unpleasant for you, then consider using the `boot` script included with this distribution.  `boot` provides an easy way to launch MESS Apple /// emulation with most of the aforementioned options listed in this document.  `boot` will also attempt to coordinate the launching of other required services, e.g. `socat` and ADTPro.\r\n\r\n> `boot` has not been agressively tested.  YMMV.\r\n\r\nTo launch `boot` simply type: `./boot` from the `apple3rtr` directory.\r\n\r\nIf you do not pass any options to `./boot`, then you'll get the following output:\r\n\r\n```\r\n$ ./boot\r\n\r\nUsage: boot [-h] [-sml] [-r prt|null|vsd] [-o port] [-acn] diskimage1 [diskimage2 diskimage3 ...]\r\n\r\ndiskimage1 (and only diskimage1) may use the following optional aliases:\r\n\r\n    bos       = bosboot.dsk\r\n    cpm       = cpmboot.po\r\n    vsd       = bosvsdboot.dsk\r\n    vsdroot   = bosvsdrootboot.dsk\r\n\r\n    -h        display this help and exit\r\n    -s        512x384 resolution with scanlines\r\n    -m        768x576 resolution with scanlines\r\n    -l        1024x768 resolution with scanlines\r\n    -r prt    rs232 printer @ 9600 BPS outputing to printer.txt\r\n    -r null   rs232 null modem @ 9600 BPS listening on \"port\", default 2023\r\n    -r full   rs232 null modem @ 115K BPS listening on \"port\", default 2023\r\n    -r vsd    rs232 null modem @ 115K BPS listening on \"port\", default 1977\r\n    -o port   override default port (requires -r), port = 0 will be random\r\n    -a        launch ADTPro on port specified by -r vsd or -o\r\n    -c        launch socat on port specified by -r null or -o\r\n    -n        no HD\r\n```\r\n\r\nMost users will just run `./boot bos`.  This will boot up a virtual Apple /// using the following command:\r\n```\r\nmess64 apple3 -skip_gameinfo -volume -24 -sl1 cffa2 -hard apple3.hd -sl2 thclock -sl3 applicard -ramsize 512k -resolution 768x576 -effect Scanlines75x3 -flop1 bosboot.dsk\r\n```\r\n\r\n`bos` is an alias for `bosboot.dsk`, other aliases are listed for your reference when invoking `./boot` without any parameters.  You can of course supply any diskette image name, as well as the names for diskette images you'll like inserted in to virtual floppy drives `.D2`, `.D3`, and `.D4`.\r\n\r\nYou can modify the behavior with the options listed above.  E.g. say you wanted to use BOS with VSDRIVE, simply type `./boot -a -r vsd vsd`, e.g.:\r\n```\r\n$ ./boot -a -r vsd vsd\r\nADTPro Server version 2.0.0\r\n\r\nRunning... mess64 apple3 -skip_gameinfo -volume -24 -sl1 cffa2 -hard apple3.hd -sl2 thclock -sl3 applicard -ramsize 512k -resolution 768x576 -effect Scanlines75x3 -flop1 bosbootvsd.dsk -rs232 null_modem -bitb socket.127.0.0.1:1977\r\n```\r\nThis command will launch ADTPro and connect MESS to it for VSDRIVE support from BOS.  MESS will also be configured for 115K BPS serial speeds.  After exiting MESS, ADTPro will be shutdown.\r\n\r\n> You must have `Virtual.po` and `Virtual2.po` prepared first.  If not setup, then ADTPro will create two blank 800K disk images.\r\n\r\nThe rest of the options should be fairly strait forward.\r\n\r\n* `-s`, `-m`, `-l` are essentially *small*, *medium*, *large* display sizes (see the `boot` help output for the exact sizes).  The default is *medium*.\r\n\r\n* `-r` specifies RS-232 support and takes a single argument (`prt`, `null`, `full`, `vsd`) that is used to determine 9600 or 115K BPS as well as what port to connect to.\r\n\r\n* If you are having problem with TCP sockets taking a long time to time out you can override the port number with `-o` *port number*.  A port number of `0` (e.g. `-o 0`) will generate a random port using the range 1000-1999.  `-o` requires `-r`.\r\n\r\n* `-a` will launch ADTPro and configure it to listen to the port specified by `-r` and `-o`.  `-a` and `-c` are mutually exclusive.  ADTPro will be killed when MESS exits.\r\n\r\n* `-c` will launch `socat` and configure it to listen to the port specified by `-r` and `-o`.  `-c` and `-a` are mutually exclusive.  `socat` will be killed when MESS exits.\r\n\t> It is not necessary to use `-a` or `-c` if you launch the services yourself.\r\n\t\r\n* `-n` will not use the CFFA adapter excluding the use of `apple3.hd`\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}